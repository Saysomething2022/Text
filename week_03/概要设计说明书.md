# 概要设计说明书
> ## 项目名称 : “有言以对论坛”网站建设
> ### 项目标识 : 校园论坛
> ### version : v3.0
> ### 状态与版本信息
> #### 文件状态 : 已完成
> #### 文件标识 : 概要设计说明书
> #### 当前版本 : 3.0 
> #### 作者
> ##### 姓名: 刘亚男
> ##### 学号: 2019011366
> ##### 姓名: 房丽婷
> ##### 学号: 2019011392 
> ##### 姓名: 耿聪
> ##### 学号: 2019013008
> ##### 姓名: 郑时
> ##### 学号: 2019011154
>
> ##### 团队 : 有言以队
> #### 完成日期 : 2022.10.4
> #### 版本更新信息
> https://github.com/Saysomething2022/Text/tree/main/week_03
> ### 引言
> #### 使用人员
>
> &nbsp;&nbsp;客户、项目经理、开发人员以及跟该项目相关的其他竞争人员。
>
> #### 编写目的
>
> &nbsp;&nbsp;本说明的目的是对校园论坛进行概要的功能说明，以便用户及项目开发人员了解产品大致的设计与实现。以下叙述将结合文字描述、结构图等来描述校园论坛的体系结构设计、接口设计，数据设计等方面。
>
> #### 背景 : 
>
> &nbsp;&nbsp;大约是从1991年开始，国内开始了第一个BBS站。经过长时间的发展，直到1995年，随着计算机及其外设的大幅降价，BBS才逐渐被人们所认识。1996年更是以惊人的速度发展起来。国内的BBS站，按其性质划分，可以分为2种：一种是商业BBS站，如新华龙讯网；另一种是业余BBS站，如天堂资讯站。由于使用商业BBS站要交纳一笔费用，而商业站所能提供的服务与业余站相比，并没有什么优势，所以其用户数量不多。多数业余BBS站的站长，基于个人关系，每天都互相交换电子邮件，渐渐地形成了一个全国性的电子邮件网络China FidoNet（中国惠多网）。于是，各地的用户都可以通过本地的业余BBS站与远在异地的网友互通信息。这种跨地域电子邮件交流正是商业站无法与业余站相抗衡的根本因素。由于业余BBS站拥有这种优势，所以使用者都更乐意加入。这里“业余”2字，并不是代表这种类型的BBS站的服务和技术水平是业余的，而是指这类BBS站的性质。一般BBS站都是由志愿者开发的。他们付出的不仅是金钱，更多的是精力。其目的是为了推动中国计算机网络的健康发展，提高广大计算机用户的应用水平。
>
> #### 定义与缩写
> ##### 术语及其解释：
> | 术语 | 解释 | 
> | ----- | ----- | 
> | E-R图 | 用特定图形表示系统功能、流程的一种方式 |
> | 数据流图 | 用特定图形表示系统功能、流程的一种方式 |
> | 实体 | 客观世界中存在的且可以互相区别的事物 |
> | 联系 | 客观事物中的彼此之间的联系 |
> | 属性 | 实体或者联系所具有的性质 |
> | 用例图 |参与者的外部用户所能观察到的系统功能的 |
>
> #### 参考资料：
>
> Java Web程序设计（第2版）（清华大学出版社）
>
> 软件工程（第3版）（高等教育出版社）
>
> 数据库系统概论（第5版）（高等教育出版社）
***
## 一、总体设计

### 1.1 需求规定
#### 1.1.1 用户需求

&nbsp;&nbsp;对于一个用户，使用论坛进行交流时，首先要注册一个账户，然后登录后才能进行对帖子的回复，如果不登录，就只能查看帖子而不能进行回复和发表帖子。用户使用论坛系统的需求是发表某一个主题相关的帖子，用户在发表帖子后，如果有人进行回复，就要在首页提醒用户有新消息。用户可以删除自己发表的帖子和评论。对于论坛管理人员来说，需要完成对用户发表的帖子的管理，包括：设置精华帖、置顶帖子、删除帖子等操作。

&nbsp;&nbsp;开发校园论坛系统的目的是提供一个供我校学生交流的平台，为我校学生提供交流经验、探讨问题的社区。因此，校园论坛系统最基本的功能首先是发表主题，其次是其他人员根据主题发表自己的看法。此外，为了记录主题的发表者和主题的回复者信息，系统还需要提供用户注册和登录的功能。只有注册的用户登录后才能够发表和回复主题，浏览者（游客）只能浏览主题信息。根据用户的需求及以上的分析，校园论坛需要具备前台功能和后台功能。

#### 1.1.2 功能

1. 系统前台功能：显示用户发表的帖子，查看帖子的内容、发表对帖子的回复、发表对回复的回复、显示用户的头像、用户信息的显示、用户新信息的提醒。
2. 系统后台功能：进入后台、帖子管理、用户管理、添加删除用户、系统设置、退出系统、返回首页。

### 1.2 运行环境
#### 1.2.1 设备

&nbsp;&nbsp;服务器 CPU：PIII 500以上，内存：512M以上。
&nbsp;&nbsp;客户机 CPU：P200MMX以上，内存：32M以上。

#### 1.2.2 支持软件

&nbsp;&nbsp;客户端：Chrome，Firefox，IE浏览器等。
&nbsp;&nbsp;服务器端：Windows7及以上，Tomcat6.0，JDK1.5及其以上版本，IE6.0，及其以上版本等。
&nbsp;&nbsp;数据库：采用mysql，运行于服务器端。

### 1.3 基本设计概念和处理流程

&nbsp;&nbsp;校园论坛所具有的功能包括：用户注册、用户登录、用户信息修改、浏览帖子、发表帖子、收藏帖子、搜索帖子、回复帖子、用户信息管理（查询、增加、删除、修改）。

&nbsp;&nbsp;从整体上可以分为数据层、数据访问层和业务逻辑层。数据层是系统最底层，它用于存储系统的所有数据。数据访问层建立在数据库之上，应用程序通过该层访问数据库。数据访问层一般封装数据库的选择、添加、更新和删除操作， 同时还为业务逻辑层服务，所以数据访问层的设计的好坏关系到整个系统的成败。业务逻辑层包括用户登录、用户注册、 发表帖子等业务逻辑，它一般由Web页面实现。

### 1.4 结构

![img](https://img.javabysj.cn/upload/20181019/153992631641932.png)

用例图：
![img](https://github.com/zhengshi119/project/blob/main/%E8%AE%BA%E5%9D%9B%E5%9F%BA%E6%9C%AC%E7%94%A8%E4%BE%8B%E5%9B%BE.jpg)

论坛前台管理流程图:
![img](https://github.com/zhengshi119/project/blob/main/%E8%AE%BA%E5%9D%9B%E5%89%8D%E5%8F%B0%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B%E5%9B%BE.jpg)

论坛后台管理流程图:
![img](https://github.com/zhengshi119/project/blob/main/%E8%AE%BA%E5%9D%9B%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E6%B5%81%E7%A8%8B%E5%9B%BE.jpg)

### 1.5 功能需求与个部分程序的关系

&nbsp;&nbsp;本条用一张如下的矩阵图说明各项功能需求的实现同各块程序的分配关系：

|                                        | 用户登录界面 | 用户注册界面 | 用户信息修改界面 | 用户信息管理界面 | 浏览帖子 界面 | 搜索帖子界面 | 发表帖子界面 |
| -------------------------------------- | ------------ | ------------ | ---------------- | :--------------: | ------------- | ------------ | ------------ |
| 用户注册                               |              | √            |                  |                  |               |              |              |
| 用户登录                               | √            |              |                  |                  |               |              |              |
| 用户信息修改                           |              |              | √                |        √         |               |              |              |
| 浏览贴子                               |              |              |                  |                  | √             |              |              |
| 发表帖子                               |              |              |                  |                  |               |              | √            |
| 收藏帖子                               |              |              |                  |                  | √             |              |              |
| 搜索帖子                               |              |              |                  |                  |               | √            |              |
| 回复帖子                               |              |              |                  |                  | √             |              |              |
| 用户信息管理（查询、增加、删除、修改） |              |              |                  |        √         |               |              |              |

### 1.6 人工处理过程

&nbsp;&nbsp;管理员可以添加，删除版块，也可以修改版块资料，如版块名称，上级版块，版主。

### 1.7 尚未解决的问题

&nbsp;&nbsp;说明在概要设计过程中尚未解决而设计者认为在系统完成之前必须解决的各个问题。
1. user表的设计该如何保障用户的密码和隐私安全
2. ……

## 二、接口设计

### 2.1 用户接口

**用户登录界面：**
&nbsp;&nbsp;当用户访问正确的网址时，进入用户登录界面。该界面至少包含用户名输入栏和密码输入栏以便接受用户的输入，还应该有“登录”按钮使得用户可以提交用户名和密码和“注册”按钮。

**注册界面：**
&nbsp;&nbsp;用户点击用户登录界面的“注册”按钮后可以进入注册界面。该界面应提供“用户名”、“昵称”、“密码”、“确认密码”栏供用户输入，还应该提供“提交”按钮让用户提交用户信息并完成注册。

**主界面：**
&nbsp;&nbsp;用户提供正确的用户名和密码后，跳转到该界面。该界面根据问题库中问题的热度，问题的时间等信息为用户推送相关的问题。并且需要提供搜索问题的输入栏和“个人中心”的跳转按钮。

**搜索结果显示界面：**
&nbsp;&nbsp;通过读取主界面的搜索关键字在问题信息库中匹配相关问题，并将相关问题显示到该界面。

**查看帖子界面：**
&nbsp;&nbsp;用户在看到问题后可以点击该问题便可跳转到该界面，在该界面展示问题的详细信息，并且需要提供给用户“点赞”按钮和评论栏。

**个人中心界面：**
&nbsp;&nbsp;用户在主界面点击个人中心跳转按钮可以跳转到该界面。该界面显示用户的昵称、签名、称号、提问数、回答数等基本信息，并且提供给用户查看“我的回答”、“我的提问”、“创建问题”、“帮助\提示”和“退出”等按钮方便用户进行相应操作。

**我回复的帖子界面：**
&nbsp;&nbsp;用户在个人中心界面点击“我的回复”按钮可以跳转到该界面。该界面显示本用户发表过的所有回复，并且提供给用户“返回”按钮方便用户跳转回个人中心界面。

**我发表的帖子界面：**
&nbsp;&nbsp;用户在个人中心界面点击“我的发表”按钮可以跳转到该界面。该界面显示本用户发表过的所有帖子，并且提供给用户“返回”按钮方便用户跳转回个人中心界面。

**创建帖子界面：**
&nbsp;&nbsp;用户在个人中心界面点击“创建帖子”按钮可以跳转到该界面。该界面提供给用户帖子标题栏、设置为帖子箱选项、帖子标签选项、帖子描述栏以及“发布”按钮。用户点击“发布”按钮后的帖子信息会及时存储到帖子信息库。

### 2.2 外部接口

#### 2.2.1 硬件接口

&nbsp;&nbsp;系统运行服务器要求运行内存大于1G，存储空间大于2G。
&nbsp;&nbsp;使用者电脑内存要求512M以上，磁盘空间要求40G以上，硬盘空间要求1.5G以上。

#### 2.2.2 软件接口

&nbsp;&nbsp;VScode、IntelliJ IDEA、MySQL8.0，浏览器或安卓手机端。

### 2.3 内部接口

**登录界面：**
&nbsp;&nbsp;由输入用户名，密码的文本框和登录按钮组成。

**发帖界面：**
&nbsp;&nbsp;帖子的主题文本输入框，具体内容文本输入框。

**回帖界面：**
&nbsp;&nbsp;回帖内容输入框以及提交按钮。

**注册界面：**
&nbsp;&nbsp;注册用户名、密码以及各个选填信息输入文本输入框。

**管理员信息管理界面：**
&nbsp;&nbsp;删除、修改、查看、发布、更新等超链接组成。

## 三、运行设计

### 3.1 运行模块组合

&nbsp;&nbsp;系统是基于javaweb技术开发完成的,多窗口的环境下通过调试模块内实现不同窗体的链接。

### 3.2 运行控制

&nbsp;&nbsp;用户利用系统平台通过发布、删除或修改帖子实现言论信息的公开展示，而管理员利用赋予的权限进行对于相关言论的管理

### 3.3 运行时间

1. 系统运行不响应时间不能超过10秒

2. 对系统进行操作时，响应时间在5秒之内

3. 多用户操作时，时间和相应的要求同上



## 四、系统数据结构设计

### 4.1 逻辑结构设计要点

&nbsp;&nbsp;本系统包含 8 个表，下面是这些表的结构。

1. user_info 表结构如表所示：

|字段名|	数据类型|	字段长度|	是否主键|是否外键|	是否为空|	备注|
| --------- |--------- |--------- |--------- |----------|--------- |--------- |
|user_id	|int|	15	|是|否|	否|	用户 id|
|user_name	|varchar	|50|	否	|否 |否	|用户名|
|user_age	|int	|50|	否	|否 |否	|用户年龄|
|user_password| varchar | 50       | 否     |否  | 否       |密码|
|user_sex|	varchar|	2	|否	|否|否|	 用户性别|
|user_phone|	varchar|	255|	否|否|	否|	联系电话|
|user_email|	varchar|	200|	否|否|	否|	电子邮箱|
|user_from	|varchar|	200|	否|否|	否|	地址|
|user_intro	|varchar	|50|	否	|否 |否	|个人简介|
|user_createtime|	datatime|	|	否|否|	否|	创建时间|

2. post_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|post_id|	int|	10|	是|否|	否|	发帖 id|
|post_title|	varchar|	255|	否|否|	否|	帖子标题|
|post_content|	varchar|	255|	否|否|	否|	帖子内容|
|post_photo|	varchar|	255|	否|否|	否|	帖子照片|
|section_name|	varchar|	255|	否|否|	否|	所属版块|
|post_createtime|	datatime|	|	否|否|	否|	发帖时间|
|user_id|	int |	255|	否|是|	否|	 发帖用户id|
|user_name|	varchar|	255|	否|否|	否|	 发帖用户名|
|post_status|	int|	255|	否|否|	否|	审核情况|


3. comment_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|comment_id|	int|	10|	是|否|	否|	评论 id|
|comment_content|	varchar|	255|	否|否|	否|	评论内容|
|user_id|	int |	255|	否|是|	否|	 发评论用户id|
|post_id|	int|	255|	否|是|	否|	 被评论帖子id|
|comment_createtime|	datatime|	|	否|否|	否|	评论发布时间|


4. section_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|section_id|	int|	10|	是|否|	否|	版块 id|
|section_name|	varchar|	255|	否|否|	否|	版块名|
|section_createtime|	datatime|	|	否|否|	否|	版块创建时间|


5. image_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|user_id|	int|	10|	是|是|	否|	用户 id|
|image_photo|	varchar|	255|	否|否|	否|	图片链接|

6. collect_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|collect_id|	int|	10|	是|否|	否|	收藏 id|
|user_id|	int |	255|	否|是|	否|	 收藏用户id|
|post_id|	int|	255|	否|是|	否|	 被收藏帖子id|

7. like_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|like_id|	int|	10|	是|否|	否|	点赞 id|
|user_id|	int |	255|	否|是|	否|	 点赞用户id|
|post_id|	int|	255|	否|是|	否|	 被点赞帖子id|


8. manager_info 表结构如表所示：

|字段名	|数据类型|	字段长度|	是否主键|是否外键|	是否为空	|备注|
| --------- |--------- |--------- |--------- |------|--------- |--------- |
|manager_id|	int|	10|	是|否|	否|	管理员 id|
|manager_name|	varchar|	255|	否|否|	否|	管理员名|
|manager_password| varchar | 50       | 否     |否  | 否       |密码|
|manager_createtime|	datatime|	|	否|否|	否|	创建时间|

### 4.2 物理结构设计要点

![1b517a0984da4b3420bc2a5bdce9d38](https://user-images.githubusercontent.com/75230560/193378062-fdb93b94-fa84-4cad-ab42-438350c97d41.png)

### 4.3 数据结构与程序的关系

&nbsp;&nbsp;程序实现的功能模板：校园博客系统

&nbsp;&nbsp;涉及的主要结构：

1. 用户表（user）

2. 帖子表（post）

3. 评论表（comment）

4. 版块表（section）

5. 头像表（image）

6. 收藏表（collect）

7. 点赞表（like）

8. 管理员表（manager）



## 五、系统出错处理设计

### 5.1 错误处理

#### 5.1.1 出错信息

| 出错信息 | 出错形式 | 含义 | 处理方式 |
| --- | --- | --- | --- |
| 帖子的发布修改或管理员的处理出现问题 | 弹窗显示平台处理出现问题 |  |  |
| 长时间页面没有响应则自动做出连接超时的处理信息 |  |  |  |
| 输入出错 |  |  | 提示再次输入的信息提示 |
| 系统错误 |  |  | 将做自动退出 |

#### 5.1.2 补救措施

1. 进行平台定期维护检查；
2. 定期对数据进行备份；
3. 恢复及再启动技术，使软件从故障点恢复执行或使软件从头开始重新运行的方法。
4. 对于各种错误做出信息提示，然后采取重新输入或者退出的处理。

### 5.2 系统维护设计

#### 5.2.1 系统本身的故障

&nbsp;&nbsp;系统已经在使用中，但在使用过程中发现经常出现几种错误，需要对这些错误进行收集、整理、归类，并在此过程中对相关使用个人和部门及时给与支持。

#### 5.2.2 新需求

&nbsp;&nbsp;随着公司业务的发现，可能公司的组织机构、业务模式发生改变，为适应新的业务流程、新的结算方式等等，要对现有系统进行升级或二次开发。这时候需要跟相关部门作必要的沟通，及时、准确了解需求，并归类整理成文档。

#### 5.2.3 研究维护可行性

&nbsp;&nbsp;召集相关部门和人员，对整理的维护事项作技术实现方面的认证，确认是否可以实现。在可以实现的情况下还要考虑手头是否有足够的人员可以投入开发，是否我们有足够的时间来完成系统升级改版。

#### 5.2.4 分析设计维护方案

&nbsp;&nbsp;在对问题有足够的认识，并确认有足够资源可以按时完成的情况下，需要把需求转化为用于开发的技术文档，如系统维护概要说明书、系统维护功能清单、新的数据库清单、系统维护详细说明书；之后依据现有人员列出详细的开发计划。最后把所有文档一并交给业务部门确认，待他们没有意见后，便可进入系统维护工作。

#### 5.2.5 系统维护

1. 参与人员

&nbsp;&nbsp;项目主管、DBA、开发人员、美工、测试人员。

2. 工作分配

&nbsp;&nbsp;项目主管把握整个项目进度，负责开发任务的分配、跟踪、检视、提供必要的支持等。DBA保障数据库的稳定，协助开发人员作数据挖掘、写有难度的Sql语句、存储过程等。
&nbsp;&nbsp;开发人员主要写代码、作测试，及时跟主管、美工、DBA作沟通，保证开发不会Delay。
&nbsp;&nbsp;美工，负责页面设计和美化，保障页面风格一致性。
&nbsp;&nbsp;测试人员，在系统上线之前做充分的测试，保障系统安全、稳定、高效运行。本论坛测试贯穿于整个系统的开发过程，按照工作进行的先后顺序，测试过程可分为制定计划、测试设计、测试执行、跟踪缺陷这几个阶段。在每个阶段，都有一些数据需要保存，师生之间也需要进行交互，以帮助笔者能很好的进行测试。测试过程的工具是一种用于满足上述需求的软件和硬件工具，它对整个测试过程，保存在测试的不同阶段产生的文档、数据，协调人员之间的工作。系统测试在整个系统设计与实现过程中占据了很多资源。通过在测试过程中合理的引入系统测试工具，能够缩短校园论坛系统的开发时间，提高测试质量，从而更快、更好的提供需要的校园论坛产品。

#### 5.2.6 系统更新、重新发布

&nbsp;&nbsp;系统开发完毕，经过反复、周密的测试，由项目负责人将系统重新发布出去，但要尽量保证原有数据完整性，保证新旧系统切换过程中还影响业务部门使用。因此建议先期新老系统并行，待新系统稳定之后再关掉老系统。

